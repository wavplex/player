(function(f){f.fn.html5audio=function(e){function d(){var a=0==k.find("div[class='fontMeasure']").length?f("<div/>").addClass("fontMeasure").appendTo(k):k.find("div[class='fontMeasure']");ta=new apTextScroller;ta.init(a,mb,fe,"left",e.scrollSeparator,e.scrollSpeed)}function Y(){V&&clearTimeout(V);ia.css("display","none");Eb=!1}function ua(a){if(m&&!x&&!ha){if(!Fb){if(Ja){if(a=a.originalEvent.touches,!(a&&0<a.length))return!1}else a.preventDefault();Fb=!0;Ra.on(nb,function(a){a:{var c;if(Ja){if(a.originalEvent.touches&&
a.originalEvent.touches.length)c=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)c=a.originalEvent.changedTouches;else break a;if(1<c.length)break a;c=c[0]}else c=a;a.preventDefault();Q(c)}}).on(ob,function(a){a:if(Fb){Fb=!1;Ra.off(nb).off(ob);var c;if(Ja){if(a.originalEvent.touches&&a.originalEvent.touches.length)c=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)c=a.originalEvent.changedTouches;
else break a;if(1<c.length)break a;c=c[0]}else c=a;a.preventDefault();Q(c)}})}return!1}}function Q(a){"horizontal"==Gb?C=Math.max(0,Math.min(1,(a.pageX-pb.offset().left)/ja)):(C=Math.max(0,Math.min(1,(a.pageY-pb.offset().top)/ja)),C=1-C);D()}function y(){if(!m||x)return!1;ic?(C=Dc,ic=!1):(Dc=C,C=0,ic=!0)}function D(){"horizontal"==Gb?jc.css("width",C*ja+"px"):jc.css("height",C*ja+"px");W&&("youtube"==ca?Z?A&&A.setVolume(C):"undefined"!==typeof l(E)&&l(E).pb_setVolume(C):X?n&&(n.volume=C):"undefined"!==
typeof l(v)&&l(v).pb_setVolume(C));0<C?k.find(".player_volume").find("img").attr("src",id):k.find(".player_volume").find("img").attr("src",jd);isMobile&&Hb&&(V&&clearTimeout(V),V=setTimeout(Y,kc))}function p(){Hb&&V&&clearTimeout(V);Ma.css("display","block");ia.on("mousemove",R).on("mouseout",J);Ra.on("mouseout",J)}function J(){Hb&&(V&&clearTimeout(V),V=setTimeout(Y,kc));Ma.css("display","none");ia.off("mousemove",R).off("mouseout",J);Ra.off("mouseout",J)}function R(a){if("horizontal"==Gb){var b=
a.pageX-pb.offset().left;if(!r(b))return!1;0>b?b=0:b>ja&&(b=ja);a=parseInt(a.pageX-ia.offset().left-Ma.width()/2,10);Ma.css("left",a+"px");b=Math.max(0,Math.min(1,b/ja));b=parseInt(100*b,10)}else{b=a.pageY-pb.offset().top;if(!r(b))return!1;0>b?b=0:b>ja&&(b=ja);a=parseInt(b-Ma.height()/2,10);Ma.css("top",a+ge+"px");b=Math.max(0,Math.min(1,b/ja));b=parseInt(100*(1-b),10)}Ma.find("p").html(b+" %")}function na(a){if(m&&!x&&W&&!Fb&&!lc){if(!ha){if(Ja){if(a=a.originalEvent.touches,!(a&&0<a.length))return!1}else a.preventDefault();
ha=!0;Ra.on(nb,function(a){a:{var c;if(Ja){if(a.originalEvent.touches&&a.originalEvent.touches.length)c=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)c=a.originalEvent.changedTouches;else break a;if(1<c.length)break a;c=c[0]}else c=a;a.preventDefault();va(c,a)}}).on(ob,function(a){wa(a)})}return!1}}function wa(a){if(ha){ha=!1;Ra.off(nb).off(ob);var b;if(Ja){if(a.originalEvent.touches&&a.originalEvent.touches.length)b=a.originalEvent.touches;
else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)b=a.originalEvent.changedTouches;else return!1;if(1<b.length)return!1;b=b[0]}else b=a;a.preventDefault();va(b,a)}if(da)var c=setTimeout(function(){c&&clearTimeout(c);Ec=!1},500);return!1}function va(a,b){if(!da){eb=a.pageX-mc.offset().left;0>eb?eb=0:eb>K&&(eb=K);xa.width(eb);var c=Math.max(0,Math.min(1,eb/K))}else if(ya){if(Fc(b)){if(Gc||kd>ld-he)return!1;ha||(Ib(!0),L.clearRect(0,0,ka,oa),M(pa),Jb());return!1}if(!Gc)return!1;
Ec=!0;var c=a.pageX-Na.offset().left-ka/2,h=a.pageY-Na.offset().top-oa/2,c=Math.atan2(h,c);c>-1*Math.PI&&c<-.5*Math.PI&&(c=2*Math.PI+c);pa=c=Math.max(0,Math.min((c+Math.PI/2)/2*Math.PI*10))/100;L.clearRect(0,0,ka,oa);M(pa);Jb()}if(!r(c))return!1;Kb=pa;ea(c)}function ea(a){"youtube"==ca?Z?(a=(a*A.getDuration()).toFixed(1),r(a)&&A.seek(a)):"undefined"!==typeof l(E)&&l(E).pb_seek(a):X?n&&n.seekable&&0<n.seekable.length&&(!ie||isMobile?n.currentTime=a*n.duration:a*n.duration>=n.buffered.end(0)-5?n.currentTime=
n.buffered.end(0)-5:n.currentTime=a*n.duration):"undefined"!==typeof l(v)&&l(v).pb_seek(a)}function qa(){W&&(za.css("display","block"),$a.on("mousemove",ab).on("mouseout",Sa),Ra.on("mouseout",Sa))}function Sa(){W&&(za.css("display","none"),$a.off("mousemove",ab).off("mouseout",Sa),Ra.off("mouseout",Sa))}function ab(a){if(!da){var b=a.pageX-mc.offset().left;if(!r(b))return!1;0>b?b=0:b>K&&(b=K);a=parseInt(a.pageX-$a.offset().left-za.width()/2,10);za.css("left",a+"px");b=Math.max(0,Math.min(1,b/K))}else if(ya){if(Fc(a))return za.css("display",
"none"),!1;b=a.pageX-Na.offset().left;a=a.pageY-Na.offset().top;a=Math.atan2(a-oa/2,b-ka/2);a>-1*Math.PI&&a<-.5*Math.PI&&(a=2*Math.PI+a);b=Math.max(0,Math.min((a+Math.PI/2)/2*Math.PI*10))/100;za.css("display","block")}if(!r(b))return!1;nc(b)}function nc(a){if(!r(a))return!1;var b,c;"youtube"==ca?Z?(c=A.getDuration(),b=a*c):"undefined"!==typeof l(E)&&(c=l(E).pb_getFlashDuration(),b=a*c):X?n&&(c=n.duration,b=a*c):"undefined"!==typeof l(v)&&(c=l(v).pb_getFlashDuration(),b=a*c);if(r(b)&&r(c))za.find("p").html(Lb(b)+
md+Mb(c));else return!1}function M(a){L.beginPath();L.arc(ka/2,oa/2,Hc-Nb/2,-oc,nd*a-oc,!1);L.strokeStyle=Ic;L.lineCap="butt";L.lineWidth=Nb;L.stroke()}function Oa(a){bb.beginPath();bb.arc(ka/2,oa/2,Hc-Nb/2,-oc,nd*a-oc,!1);bb.strokeStyle=je;bb.lineCap="butt";bb.lineWidth=Nb;bb.stroke()}function Jb(){if(F)a=62,b=57,L.fillStyle=Ic,L.fillRect(a,b,14,45),L.fillRect(a+23,b,14,45);else{var a=65,b=57,c=65-a,h=102-b,g=Math.atan2(h,c)-Math.PI/3,h=Math.sqrt(c*c+h*h),c=Math.cos(g)*h+a,g=Math.sin(g)*h+b;L.beginPath();
L.fillStyle=Ic;L.moveTo(a,b);L.lineTo(65,102);L.lineTo(c,g);L.fill()}}function Fc(a){var b;if(Ja){if(a.originalEvent.touches&&a.originalEvent.touches.length)a=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)a=a.originalEvent.changedTouches;else return!1;if(1<a.length)return!1;b=a[0]}else b=a;a=b.pageX-Na.offset().left;b=b.pageY-Na.offset().top;var c=ka/2,h=oa/2;kd=Math.sqrt((a-c)*(a-c)+(b-h)*(b-h));return Math.sqrt((a-c)*(a-c)+(b-h)*(b-h))<ld}
function Jc(a){if(0!=k.find(".componentPlaylist").length)if(aa)"vertical"==Ob?Pa.outerHeight(!0)>=qb.height()?(aa.reinitialise(),a&&(aa.scrollToY(0),f(".jspPane").css("top","0px"))):(aa.destroy(),aa=null):(aa.reinitialise(),a&&(aa.scrollToX(0),f(".jspPane").css("left","0px")));else if(a=k.find(".componentPlaylist"),aa=a.jScrollPane().data().jsp,a.on("jsp-initialised",function(a,c){}).jScrollPane({mouseWheelSpeed:20}),"horizontal"==Ob&&!isMobile)a.on("mousewheel",ke)}function ke(a,b,c,h){if(!m||x)return!1;
aa&&aa.scrollByX(100*(0<b?-1:1));return!1}function Ib(a){if(F){if("youtube"==ca){if(!Ta)return!1;Z?A.togglePlayback():("undefined"!==typeof l(E)&&l(E).pb_togglePlayback(),W=!0)}else X?n&&n.pause():"undefined"!==typeof l(v)&&l(v).pb_pause();F=!1;Ka("off")}else{if("youtube"==ca){if(!Ta)return!1;Z?isMobile?!Pb&&fa?(m=!1,pc("on")):A.togglePlayback():A.togglePlayback():("undefined"!==typeof l(E)&&l(E).pb_togglePlayback(),W=!0)}else X?n&&n.play():"undefined"!==typeof l(v)&&l(v).pb_play();F=!0;fb("off")}if(!a)return!1}
function od(a){if(!m||x)return!1;a.preventDefault();a=f(a.currentTarget);var b=a.attr("data-id");if(a.closest(".playlistItem").hasClass(Qb))return!1;fa=!0;Qa();t.processPlaylistRequest(b)}function le(a){if(!m||x)return!1;a.preventDefault();a=f(a.currentTarget).attr("class").split(" ");if(-1!=f.inArray("controls_prev",a))fa=!0,Qa(),t.advanceHandler(-1,!0);else if(-1!=f.inArray("controls_toggle",a))W&&Ib();else if(-1!=f.inArray("controls_next",a))fa=!0,Qa(),t.advanceHandler(1,!0);else if(-1!=f.inArray("player_volume",
a))isMobile?Hb?(V&&clearTimeout(V),Eb?(ia.css("display","none"),Eb=!1):(ia.css("display","block"),Eb=!0,V=setTimeout(Y,kc))):(y(),D()):(y(),D());else if(-1!=f.inArray("player_download",a)){if(!Ua)if(a=ca){var b=t.getCounter(),c=B[b].download,b=Kc(b,!1);a=pd(a,b,c);qd(a.name,a.path)}else u&&alert("Invalid data-type for file download function! Quitting."),Ua=!1}else-1!=f.inArray("player_loop",a)?(Aa?(k.find(".player_loop").find("img").attr("src",qc),Aa=!1):(k.find(".player_loop").find("img").attr("src",
Rb),Aa=!0),t.setLooping(Aa)):-1!=f.inArray("player_shuffle",a)&&(Ba?(k.find(".player_shuffle").find("img").attr("src",rc),Ba=!1):(k.find(".player_shuffle").find("img").attr("src",Sb),Ba=!0),t.setRandom(Ba))}function me(a){m&&(a.preventDefault(),a=f(a.currentTarget).attr("class").split(" "),-1!=f.inArray("controls_prev",a)?k.find(".controls_prev").find("img").attr("src",ne):-1!=f.inArray("controls_toggle",a)?F?fb("on"):Ka("on"):-1!=f.inArray("controls_next",a)?k.find(".controls_next").find("img").attr("src",
oe):-1!=f.inArray("player_volume",a)?0<C?k.find(".player_volume").find("img").attr("src",pe):k.find(".player_volume").find("img").attr("src",qe):-1!=f.inArray("player_download",a)?k.find(".player_download").find("img").attr("src",re):-1!=f.inArray("player_loop",a)?Aa?k.find(".player_loop").find("img").attr("src",qc):k.find(".player_loop").find("img").attr("src",Rb):-1!=f.inArray("player_shuffle",a)&&(Ba?k.find(".player_shuffle").find("img").attr("src",rc):k.find(".player_shuffle").find("img").attr("src",
Sb)))}function se(a){m&&(a.preventDefault(),a=f(a.currentTarget).attr("class").split(" "),-1!=f.inArray("controls_prev",a)?k.find(".controls_prev").find("img").attr("src",te):-1!=f.inArray("controls_toggle",a)?F?fb("off"):Ka("off"):-1!=f.inArray("controls_next",a)?k.find(".controls_next").find("img").attr("src",ue):-1!=f.inArray("player_volume",a)?0<C?k.find(".player_volume").find("img").attr("src",id):k.find(".player_volume").find("img").attr("src",jd):-1!=f.inArray("player_download",a)?k.find(".player_download").find("img").attr("src",
ve):-1!=f.inArray("player_loop",a)?Aa?k.find(".player_loop").find("img").attr("src",Rb):k.find(".player_loop").find("img").attr("src",qc):-1!=f.inArray("player_shuffle",a)&&(Ba?k.find(".player_shuffle").find("img").attr("src",Sb):k.find(".player_shuffle").find("img").attr("src",rc)))}function Qa(){if(!ra&&-1!=t.getCounter()){var a=f(Va[t.getCounter()]);if(a&&a.hasClass("playlistSelected")){var b=a.attr("data-id");a.removeClass("playlistSelected").addClass("playlistNonSelected");"undefined"!==typeof playlistItemEnabled&&
playlistItemEnabled(O,N,a,b)}}}function rd(){if(!ra){var a=f(Va[t.getCounter()]);if(a&&a.hasClass("playlistNonSelected")){var b=a.attr("data-id");a.removeClass("playlistNonSelected").addClass("playlistSelected");"undefined"!==typeof playlistItemDisabled&&playlistItemDisabled(O,N,a,b)}}}function Lc(){var a=e.activeItem;r(a)&&-1!=a?(0>a?a=0:a>G-1&&(a=G-1),t.setCounter(a,!1)):fa=!0}function sd(){w&&-1!=t.getCounter()&&(Tb(),td(),Qa())}function Ub(){Tb();td();var a=0,b;for(a;a<G;a++)b=f(Va[a]).off("click",
od),ud&&!isMobile&&b.off("mouseenter").off("mouseleave");w&&(w.children().each(function(){var a=f(this);a.data("hap_wrap_player")&&a.data("hap_wrap_player").destroyPlaylist()}),w.empty(),w=null);Pa.empty();ra=Vb=!1;sc=P=q=null;rb=sb=Wb=!1;tb=null;t.reSetCounter();B=[];Va=[];S=[];aa&&aa.reinitialise()}function Tb(){tc&&(Z?A&&A.stop():"undefined"!==typeof l(E)&&l(E).pb_dispose(),tc=!1);X?(Ca&&clearInterval(Ca),n&&(n.pause(),n.src=""),Xb&&Xb.off("ended pause play canplay canplaythrough loadedmetadata error")):
"undefined"!==typeof l(v)&&l(v).pb_dispose();Mc();sc?uc.css("display","block"):uc.css("display","none");Kb=null;Nc=W=F=lc=!1;Oc||(Yb=void 0)}function vd(a){if("undefined"===typeof a)return u&&alert("setPlaylist method requires data parameter. loadPlaylist failed."),!1;if("undefined"===typeof a.hidden)return u&&alert("setPlaylist method requires data.hidden parameter. loadPlaylist failed."),!1;var b=we(a.hidden);if("undefined"===typeof a.id)return u&&alert("setPlaylist method requires data.id parameter. loadPlaylist failed."),
!1;a=a.id;x=!0;wd||(wd=!0);xd();Pa.css("opacity",0);w&&Ub();Vb=!1;ra=b;yd&&isIE?(b=f(cb.find(a).css("display","block").clone().wrap("<p>").parent().html()),f(cb.find(a).css("display","none"))):(b=cb.find(a).css("display","block").clone(),cb.find(a).css("display","none"));b.css("fontSize",0);if(0==b.length)return u&&alert('Failed to select playlist! Make sure that element: "'+a+'" exist in playlist list! Quitting.'),Pc(),!1;if(ra)ub.empty(),b.appendTo(ub),Da=0,rb=sb=gb=!0,w=Qc;else{if(!aa&&0==Pa.length)return u&&
alert("playlist_inner html element seems to be missing! You could be trying to use loadPlaylist method without having necessary html elements inside componentWrapper. Quitting."),!1;b.appendTo(Pa);w=b}B=[];Va=[];S=[];H=[];b.find("li[class*='playlistItem']").each(function(){H.push(f(this))});T()}function T(){H.length?xe():ye()}function xe(){Zb=ga=U=P=la=null;Rc=!1;var a=H[0],b=a.attr("data-type").toLowerCase(),c=a.attr("data-path"),h=a.hasClass(zd);z=[];a.hasClass(Ad)&&(Rc=!0);void 0==a.attr("data-plink")||
I(a.attr("data-plink"))||(la=a.attr("data-plink"));void 0!=a.attr("data-dlink")&&("youtube_single"==b||"youtube_single_list"==b||"youtube_playlist"==b?I(a.attr("data-dlink"))||(P=a.attr("data-dlink")):P=I(a.attr("data-dlink"))?!0:a.attr("data-dlink"));void 0!=a.attr("data-download")&&("youtube_single"==b||"youtube_single_list"==b||"youtube_playlist"==b?I(a.attr("data-download"))||(U=a.attr("data-download")):U=I(a.attr("data-download"))?!0:a.attr("data-download"));void 0==a.attr("data-thumb")||I(a.attr("data-thumb"))||
(ga=a.attr("data-thumb"));I(f.trim(a.html()))||(Zb=a.html());if(h)q=a,H.shift(),T();else if("local"==b)q=a,H.shift(),T();else if("soundcloud"==b)q=a.data("toremove","true"),$b=0,vc(c);else if("podcast"==b)q=a.data("toremove","true"),h="http://ajax.googleapis.com/ajax/services/feed/load?v=1.0&output=xml&num="+ze+"&callback=?&q="+encodeURIComponent(c),f.ajax({type:"GET",url:h,dataType:"jsonp",cache:!1}).done(function(a){if(null==a.responseData)u&&alert("Playlist process failed, podcast: "+c),q&&"true"==
q.data("toremove")&&q.remove(),H.shift(),T();else{if(ieBelow9){a=Ae(a.responseData.xmlString);var b;f(a).find("item").each(function(){b=f(this);e={type:"podcast"};e.mp3=b.find("enclosure").attr("url");e.ogg="";e.title=b.find("title").text();0<b.find("media\\:thumbnail").length?b.find("media\\:thumbnail").attr("url")?e.thumb=b.find("media\\:thumbnail").attr("url"):ga&&(e.thumb=ga):ga&&(e.thumb=ga);la&&(e.url=la);P&&(e.dlink=P);U&&(e.download=U);z.push(e)})}else{Bd.html(a.responseData.xmlString);a=
Bd.get(0).getElementsByTagName("item");var h=0,g=a.length,d,k,e;for(h;h<g;h++)d=a[h],void 0!=d.getElementsByTagName("enclosure")[0]&&(e={type:"podcast"},e.mp3=d.getElementsByTagName("enclosure")[0].getAttribute("url"),e.ogg="",void 0!=d.getElementsByTagName("itunes:duration")[0]&&(k=Be(d.getElementsByTagName("itunes:duration")[0].childNodes[0].nodeValue),e.length=parseInt(1E3*k,10)),void 0!=d.getElementsByTagName("media:thumbnail")[0]?void 0!=d.getElementsByTagName("media:thumbnail")[0].getAttribute("url")?
e.thumb=d.getElementsByTagName("media:thumbnail")[0].getAttribute("url"):ga&&(e.thumb=ga):ga&&(e.thumb=ga),e.title=d.getElementsByTagName("title")[0].childNodes[0].nodeValue,la&&(e.url=la),P&&(e.dlink=P),U&&(e.download=U),z.push(e))}Wa()}}).fail(function(a,b,h){u&&alert("Parse feed error: "+a.responseText);u&&alert("Playlist process failed, podcast: "+c);q&&"true"==q.data("toremove")&&q.remove();H.shift();T()});else if("folder"==b){q=a.data("toremove","true");var h=hap_source_path+"folder_parser.php",
g=!0;void 0!=a.attr("data-subdirs")&&"false"==a.attr("data-subdirs")&&(g=!1);g={dir:c,subdirs:g};f.ajax({type:"GET",url:h,data:g,dataType:"json"}).done(function(a){Ce(a,"title");var b=0,c=a.length,h,g;Cd&&(db=z.length?z.length-1:0);for(b;b<c;b++)if(h=a[b],g=h.path,g=g.replace(/\\'/g,"'"),g=g.replace(/\\"/g,'"'),g=g.replace(/\\0/g,"\x00"),path=g=g.replace(/\\\\/g,"\\"),console.log(h),g={type:"folder"},/.mp3/.test(path)){g.mp3=path;g.ogg=path.substr(0,path.lastIndexOf("."))+".ogg";var d=path.substr(0,
path.lastIndexOf("."));title=/\//i.test(d)?d.substr(d.lastIndexOf("/")+1):d;title=title.split("_").join(" ");g.title=title;g.thumb=path.substr(0,path.lastIndexOf("."))+".jpg";g.size=parseInt(h.size,10);g.lastmod=parseInt(h.lastmod,10);la&&(g.url=la);P&&(g.dlink=P);U&&(g.download=U);ga&&(g.thumb=ga);z.push(g)}z.length&&Cd?Dd():Wa()}).fail(function(a,b,h){u&&alert("Read folder error! Make sure you run this online or on local server!");u&&alert("Playlist process failed, folder: "+c);q&&"true"==q.data("toremove")&&
q.remove();H.shift();T()})}else if("xml"==b){q=a;var h=hap_source_path+c,d,k=[];f.ajax({type:"GET",url:h,dataType:"html",cache:!1}).done(function(b){H.shift();f(b).find("li[class='playlistItem']").each(function(){d=Sc(f(this));q?q.after(f(d)):0<w.children().size()?f(d).prependTo(w):f(d).appendTo(w);q=f(d);k.push(f(d))});b=0;var c=k.length;k.reverse();for(b;b<c;b++)H.unshift(k[b]);k=null;a.remove();T()}).fail(function(a,b,h){u&&alert("Playlist process failed, xml: "+c);q&&q.remove();H.shift();T()})}else if("database_data"==
b||"database_html"==b)if(void 0==a.attr("data-table")||I(a.attr("data-table")))u&&(alert("Database table missing!"),alert("Playlist process failed, database query: "+c)),H.shift(),T();else{var e=g=null,l=null;void 0==a.attr("data-limit")||I(a.attr("data-limit"))||(g=parseInt(a.attr("data-limit"),10));void 0==a.attr("data-range")||I(a.attr("data-range"))||(h=a.attr("data-range").split(","),2==h.length&&(e=h[0],l=h[1]));q=a;h=hap_source_path+"includes/database.php";k=[];g={db_name:c,db_table:a.attr("data-table"),
db_type:b,limit:g,range_from:e,range_to:l};f.ajax({type:"POST",url:h,data:g}).done(function(h){if(-1<h.indexOf("Database information missing!")||-1<h.indexOf("Db connection failed")||-1<h.indexOf("Db selection failed")||-1<h.indexOf("Db query failed"))u&&(alert(h),alert("Playlist process failed, database query: "+c)),q&&q.remove(),H.shift();else{H.shift();h=f.parseJSON(h);var g=0,e=h.length,l;for(g;g<e;g++){l=h[g];if("database_data"==b)if(l.type&&l.mp3||l.path)d=Ed(l);else continue;else if(l.path)d=
Sc(l.path);else continue;q?q.after(f(d)):0<w.children().size()?f(d).prependTo(w):f(d).appendTo(w);q=f(d);k.push(f(d))}g=0;e=k.length;k.reverse();for(g;g<e;g++)H.unshift(k[g]);k=null;a.remove()}T()}).fail(function(a,b,h){u&&alert("Playlist process failed, database query: "+c);q&&q.remove();H.shift();T()})}else"youtube_single"==b||"youtube_single_list"==b||"youtube_playlist"==b?(q=a.data("toremove","true"),Fd.setData({type:b,path:c})):"ofm_single"==b?(q=a.data("toremove","true"),Xa=[],Xa.push({id:c,
type:b}),ac()):"ofm_playlist"==b||"ofm_project"==b?(q=a.data("toremove","true"),Tc=b,wc=c,Xa=[],vb=1,Gd()):(u&&alert("Invalid playlist data-type attribute!"),H.shift(),T())}function Wa(){if(z.length){var a,b,c=0,h=z.length,g,d;for(c;c<h;c++)g=z[c],a=f('<li class="playlistItem" data-type="'+g.type+'"data-mp3="'+g.mp3+'" data-ogg="'+g.ogg+'" data-thumb="'+g.thumb+'"></li>'),d=g.mp3,/\.(mp3)$/i.test(g.mp3)||(d+=".mp3"),Rc&&a.addClass(Ad),g.url&&a.attr("data-plink",g.url),g.dlink&&(1!=g.dlink&&"true"!=
g.dlink?a.attr("data-dlink",g.dlink):a.attr("data-dlink",d)),g.download&&(1!=g.download&&"true"!=g.download?a.attr("data-download",g.download):a.attr("data-download",d)),g.title&&a.attr("data-title",g.title),g.thumb&&("//"==g.thumb.substr(0,2)&&(g.thumb="https:"+g.thumb),a.attr("data-thumb",g.thumb)),g.length&&a.attr("data-length",g.length),"title"==Ya?b=f('<a class="playlistNonSelected" href="#">'+g.title+"</a>").appendTo(a):"thumb"==Ya?b=f('<a class="playlistNonSelected" href="#"><img src="'+g.thumb+
'" alt="thumb"/></a>').appendTo(a):"all"==Ya&&(b=f('<a class="playlistNonSelected" href="#"></a>').appendTo(a),f('<span class="hap_thumb"><img src="'+g.thumb+'" alt="thumb"/></span>').appendTo(b),f('<span class="hap_title"><p>'+g.title+"</p></span>").appendTo(b)),Zb&&b.after(Zb),q?(q.after(a),"true"==q.data("toremove")&&q.remove()):a.appendTo(w),q=a}H.shift();T()}function ye(){if(Wb||sb){var a=0;q=null;var b;ub.find("li[class*='playlistItem']").each(function(){b=f(this);q?q.after(b):gb?b.appendTo(w):
w.children().eq(Da).before(b);q=b;a++});ub.empty()}xc();Pa.css("opacity",1);m||Hd();Zb=q=null;x=!1;Pc();if(0<G){if(Wb||sb){var c=t.getCounter();t.setPlaylistItems(G,!1);Da<=c&&(gb||t.reSetCounter(c+a));rb&&(rb=!1,Lc())}else t.setPlaylistItems(G),Lc();hb&&Za()}sb=Wb=!1;0==G&&"undefined"!==typeof playlistEmpty&&playlistEmpty(O,N);"undefined"!==typeof audioPlayerPlaylistLoaded&&audioPlayerPlaylistLoaded(O,N);Vb=!0}function xc(){B=[];S=[];Va=[];if(0==w.length)return u&&alert("lastPlaylist html element seems to be missing! You could be trying to use addTrack method without having necessary html elements inside componentWrapper. Quitting."),
!1;var a=0,b,c,h=w.find("li"),g=h.length,d,e,k,l,n,p,q,Y,r,v;bc=0;for(a;a<g;a++){c=f(h[a]).addClass(zd);S.push(c);Uc&&c.addClass(Qb);bc="horizontal"==Ob?bc+c.outerWidth(!0):bc+c.outerHeight(!0);b=c.find("a[class=playlistNonSelected]");0==b.length&&(b=c.find("a[class=playlistSelected]"));b.off().on("click",od).attr("data-id",a);Va.push(b);if(ud&&!isMobile)b.on("mouseenter",function(a){if(!m||x)return!1;a||(a=window.event);a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();a=f(a.currentTarget).attr("data-id");
var b=f(Va[a]),c=!1;t.getCounter()==a&&(c=!0);"undefined"!==typeof playlistItemRollover&&playlistItemRollover(O,N,b,a,c);return!1}).on("mouseleave",function(a){if(!m||x)return!1;a||(a=window.event);a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();a=f(a.currentTarget).attr("data-id");var b=f(Va[a]),c=!1;t.getCounter()==a&&(c=!0);"undefined"!==typeof playlistItemRollout&&playlistItemRollout(O,N,b,a,c);return!1});d="";void 0!=c.attr("data-title")?d=c.attr("data-title"):"title"==
Ya?d=b.html():"thumb"!=Ya&&"all"==Ya&&(d=b.find("span[class=hap_title]").find("p").html());Vc&&(e=Wc(a)+Xc+d,b.html(e));c=f(S[a]).attr({"data-id":a,"data-title":d});k=e=p=n="";l=void 0;v=r=Y=q=null;void 0!=c.attr("data-mp3")&&(n=c.attr("data-mp3"));void 0!=c.attr("data-ogg")&&(p=c.attr("data-ogg"));void 0!=c.attr("data-type")&&(e=c.attr("data-type"));void 0!=c.attr("data-origtype")&&(k=c.attr("data-origtype"));void 0==c.attr("data-length")||I(c.attr("data-length"))||(l=c.attr("data-length"));"youtube"==
e?(void 0==c.attr("data-download")||I(c.attr("data-download"))||(q=c.attr("data-download")),void 0==c.attr("data-dlink")||I(c.attr("data-dlink"))||(Y=c.attr("data-dlink"))):(void 0!=c.attr("data-download")&&(q=I(c.attr("data-download"))||"true"==c.attr("data-download")?n:c.attr("data-download")),void 0!=c.attr("data-dlink")&&(Y=I(c.attr("data-dlink"))||"true"==c.attr("data-dlink")?n:c.attr("data-dlink")));void 0==c.attr("data-plink")||I(c.attr("data-plink"))||(r=c.attr("data-plink"));void 0==c.attr("data-thumb")||
I(c.attr("data-thumb"))||(v=c.attr("data-thumb"));ra||(r&&0==c.find("a[class=plink]").length&&(r=f('<a class="plink" href="'+r+'" target="_blank"><img src="'+Id+'" alt="purchase"/></a>'),b.after(r)),Y&&0==c.find("a[class=dlink]").length&&(Y=f('<a class="dlink" href="#" data-dlink="'+Y+'"><img src="'+Jd+'" alt="download"/></a>'),b.after(Y),I(c.attr("data-dlink"))),Kd&&0==c.find("a[class=premove]").length&&(c=f('<a class="premove" href="#"><img src="'+De+'" alt="remove"/></a>'),b.after(c)));B.push({id:a,
type:e,origtype:k,title:d,mp3:n,ogg:p,length:l,download:q,thumb:v})}h=null;G=B.length;ra||(Ee(),Fe&&qb.length&&!w.hasClass("ui-sortable")&&(w.on("sortstart",function(a,b){b.helper.css("margin-top",Ld.scrollTop())}),w.on("sortbeforestop",function(a,b){b.helper.css("margin-top",0)}),w.sortable({cursor:"move",update:function(a,b){xc();0<G&&t.setPlaylistItems(G);var c=Pa.find("a[class=playlistSelected]").attr("data-id");c&&(t.reSetCounter(c),hb&&Za());1==G&&Lc()},receive:function(a,b){"undefined"!==typeof dropReceive&&
dropReceive(O,N)}})),Md&&("horizontal"==Ob&&Pa.width(bc),Jc(!0)));return!0}function Hd(){m=!0;x=!1;Pc();setTimeout(function(){Nd();"horizontal"==Gb?(ja=pb.width(),jc.css("width",C*ja+"px")):(ja=pb.height(),jc.css("height",C*ja+"px"));D()},100);"undefined"!==typeof audioPlayerSetupDone&&audioPlayerSetupDone(O,N)}function Ee(){var a=Ja?wb:"click";k.find("a[class=dlink]").off().on(a,function(a){a.preventDefault();if(Ua)return!1;var c=f(this),h=c.closest(".playlistItem"),g=h.attr("data-id");if(h.hasClass(Qb))return!1;
if(void 0==h.attr("data-type")||I(h.attr("data-type")))return u&&alert("Invalid data-type for file download function! Quitting."),Ua=!1;a=h.attr("data-type");void 0==h.attr("data-origtype")||I(h.attr("data-origtype"))||(a=h.attr("data-origtype"));void 0==c.attr("data-dlink")||I(c.attr("data-dlink"))||(c=c.attr("data-dlink"),g=Kc(g,!1),a=pd(a,g,c),qd(a.name,a.path))});k.find("a[class=plink]").off().on("click",function(a){if(f(this).closest(".playlistItem").hasClass(Qb))return!1});if(Kd)k.find("a[class=premove]").off().on("click",
function(a){a.preventDefault();a=f(this).closest(".playlistItem");var c=parseInt(a.attr("data-id"),10);if(a.hasClass(Qb))return!1;O.removeTrack(c)})}function pd(a,b,c){"local"==a||"folder"==a?(c.indexOf("\\")&&(c=c.replace(/\\/g,"/")),c.match(/^http([s]?):\/\/.*/)||(a=window.location.href,a=a.substr(0,a.lastIndexOf("/")+1),/^\.\.\//i.test(c)&&(c=c.substr(3),"/"==a.charAt(a.length-1)&&(a=a.substr(0,a.lastIndexOf("/"))),a=a.substr(0,a.lastIndexOf("/")+1)),c=a+c),isMobile||(b=0<c.lastIndexOf("/")?c.substr(c.lastIndexOf("/")+
1):c)):"soundcloud"==a&&(c=c.replace(/\/stream\\?/,"/download").replace(/\.mp3/,""));b=b.replace(/[^A-Z0-9\-\_\.]+/ig,"_");/\.(mp3)$/i.test(b)||(b+=".mp3");return{name:b,path:c}}function qd(a,b){if(isMobile)if(Ua=!0,Ge)Od||(Yc=Pd())&&(Od=!0),Yc?Qd(Yc,a,b):Ua=!1;else{var c=Pd();c?Qd(c,a,b):Ua=!1}else He.attr("src",hap_source_path+"dl.php?path="+b+"&name="+a)}function Qd(a,b,c){f.ajax({type:"POST",url:hap_source_path+"mail.php",data:"mail="+a+"&name="+b+"&path="+c}).done(function(a){Ua=!1}).fail(function(a,
b,c){u&&alert("Send email error: "+a.responseText);Rd();Ua=!1});yc.css({marginTop:-yc.height()/2+"px",display:"block"}).stop().animate({opacity:1},{duration:500});cc&&clearTimeout(cc);cc=setTimeout(Rd,Ie)}function Rd(){cc&&clearTimeout(cc);yc.stop().animate({opacity:0},{duration:500,complete:function(){yc.css("display","none")}})}function Pd(){for(var a=prompt("Please enter your email address where download link will be sent:"),b=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;(!b.test(a)||I(a))&&null!=a;)a=
prompt("Please enter a valid email address:");return a}function Je(){f(".hap_text_link").each(function(){var a=f(this),b=a.attr("href");"undefined"!==typeof b&&!1!==b&&-1<b.toLowerCase().indexOf(".mp3")&&a.prepend('<img class="play_link" src="'+zc+'"/>')});f(".hap_text_link, .hap_image_link").click(function(a){if(!m||x)return!1;a=f(this);var b=a.attr("href");if("undefined"===typeof b||!1===b)return!1;if(Yb&&Yb==b)return Ib();Qa();t.reSetCounter();Yb=b;Sd=a;Oc=!0;Ea&&Ea.attr("src",zc);a.hasClass("hap_text_link")&&
(Ea=a.find("img").attr("src",Td));ma=Yb;xb=ma.substr(0,ma.lastIndexOf("."))+".ogg";fa=!0;X||"undefined"!==typeof l(v)&&l(v).pb_setAutoplay(!0);Tb();Zc();return Oc=!1})}function ac(){Xa.length?Ke(Xa.shift()):(0==z.length&&q&&"true"==q.data("toremove")&&q.remove(),z.length>dc&&(z=z.slice(0,dc)),Wa())}function Ke(a){var b=a.id,c=a.type;a=Ud+"?url="+encodeURIComponent("http://api.official.fm/tracks/"+b+"?fields=streaming,cover&api_version=2");f.ajax({url:a,dataType:"html",cache:!1}).done(function(a){var b=
JSON.parse(a).contents;a={};var d,f;b.track&&b.track.streaming&&b.track.streaming.http&&(b=b.track,a.type=c,a.length=b.duration?b.duration:null,a.mp3=b.streaming.http,a.ogg=b.streaming.http,d=b.artist?b.artist:"Official Fm artist",f=b.title?b.title:"Official Fm track",a.title=d+" - "+f,la&&(a.url=la),P&&(a.dlink=P),U&&(a.download=U),b.cover.urls.small?a.thumb=b.cover.urls.small:ga&&(a.thumb=ga),z.push(a));ac()}).fail(function(a,c,d){u&&alert("Playlist process failed, ofm: "+b);ac()})}function Vd(){1<
$c?(vb+=1,vb<=$c&&Xa.length<dc?Gd():Xa.length?ac():(H.shift(),T())):Xa.length?ac():(0==z.length&&q&&"true"==q.data("toremove")&&q.remove(),H.shift(),T())}function Gd(){var a=Ud+"?url="+encodeURIComponent("ofm_playlist"==Tc?"http://api.official.fm/playlists/"+wc+"/tracks?api_version=2&page="+vb+"":"http://api.official.fm/projects/"+wc+"/tracks?fields=cover&api_version=2&page="+vb+"");console.log(a);f.ajax({url:a,dataType:"html",cache:!1}).done(function(a){a=JSON.parse(a).contents;$c=a.total_pages;
if(a.tracks&&a.tracks.length){var c=0,h=a.tracks.length,g;h>dc&&(h=dc);for(c;c<h;c++)g=a.tracks[c].track,g.url&&(g=g.url.substr(g.url.lastIndexOf("/")+1),g=g.substr(0,g.indexOf("?")),Xa.push({id:g,type:Tc}))}Vd()}).fail(function(a,c,h){u&&alert("Playlist process failed, ofm: "+wc);Vd()})}function Le(){Wd?isMobile?Pb?A.initVideo(ma):(m=!1,ad=!0,pc("on")):A.initVideo(ma):(ec=0==k.find("div[class='youtubeIframeMain']").length?f("<div/>").css({display:"block",left:"-10000px"}).addClass("youtubeIframeMain").appendTo(k):
k.find("div[class='youtubeIframeMain']"),A=f.youtubePlayer({autoPlay:Xd,defaultVolume:C,mediaPath:ma,youtubeHolder:ec,youtubeChromeless:!1,isMobile:isMobile,initialAutoplay:Me,quality:null,protocol:Ne},e),f(A).on("ap_YoutubePlayer.YT_READY",function(){bd||ec.css("left","-10000px");Ta=!0}),f(A).on("ap_YoutubePlayer.START_PLAY",function(){Ca&&clearInterval(Ca);Ca=setInterval(Oe,250);ad&&(A.stop(),A.initVideo(ma),ad=!1);!Pb&&isMobile&&(pc("off"),m=Pb=!0)}),f(A).on("ap_YoutubePlayer.END_PLAY",function(){Ac()}),
f(A).on("ap_YoutubePlayer.STATE_PLAYING",function(){Bc()}),f(A).on("ap_YoutubePlayer.STATE_PAUSED",function(){isMobile?"iPhone"==yb||"iPod"==yb?F&&(F=!1,Ka("off")):Cc():Cc()}),Wd=!0);W=tc=!0}function pc(a){"on"==a?(bd=!0,ec.css({top:"0px",left:"0px"})):(ec.css("left","-10000px"),bd=null)}function Pe(){var a=E.substr(1);embedFlashMain(a);a=v.substr(1);embedFlashAudio(a);"undefined"!==typeof l(E)?Fa=setInterval(Qe,100):(u&&alert("Problems with flash initialization (startFlashInit)! Flash for youtube not initialized! Sound_id: "+
N),Yd())}function Qe(){void 0!=l(E).setData&&(Fa&&clearInterval(Fa),l(E).setData(e),k.find(".flashMain").css("left","-10000px"),Yd())}function Yd(){"undefined"!==typeof l(v)?Fa=setInterval(Re,100):(u&&alert("Problems with flash initialization (checkFlashSound)! Flash audio backup not initialized! Sound_id: "+N),Zd())}function Se(){var a=v.substr(1);embedFlashAudio(a);var b=setTimeout(function(){b&&clearTimeout(b);"undefined"!==typeof l(v)?Fa=setInterval(Te,100):(u&&alert("Problems with flash initialization (checkFlashSound_b)! Flash audio backup not initialized! Sound_id: "+
N),zb())},500)}function Re(){void 0!=l(v).setData&&(Fa&&clearInterval(Fa),l(v).setData(e),k.find(".flashAudio").css("left","-10000px"),Zd())}function Te(){void 0!=l(v).setData&&(Fa&&clearInterval(Fa),l(v).setData(e),k.find(".flashAudio").css("left","-10000px"),zb())}function Zd(){if(da){var a=ba.substr(1);embedFlashCircle(a);"undefined"!==typeof l(ba)?Fa=setInterval(Ue,100):(u&&alert("Problems with flash initialization (checkFlashCircle)! Flash circle backup (canvas support is false) not initialized! Sound_id: "+
N),zb())}else f(".circleMain").remove(),zb()}function Ue(){void 0!=l(ba).setData&&(Fa&&clearInterval(Fa),l(ba).setData(Ab),zb())}function l(a){"#"==a.charAt(0)&&(a=a.substr(1));return-1!=navigator.appName.indexOf("Microsoft")?window[a]:document[a]}function vc(a){if(I(cd))return alert("soundcloudApiKey has not been set! Skipping Soundcloud url."),H.shift(),T(),!1;/\/favorites$/.test(a)&&(a=a.replace(/\/favorites$/,"/likes"));var b=Ve(a,cd);f.ajax({url:b,dataType:"jsonp",cache:!1}).done(function(b){var h,
g;if(b.tracks){h=b.tracks.length;h>sa&&(h=sa);for(g=0;g<h;g++)b.tracks[g].streamable&&b.tracks[g].stream_url?z.push(dd(b.tracks[g])):(h+=1,h>b.tracks.length&&(h=b.tracks.length));z.length>sa&&(z=z.slice(0,sa));Wa()}else if(b.duration)b.permalink_url=a,b.streamable&&b.stream_url&&z.push(dd(b)),z.length>sa&&(z=z.slice(0,sa)),Wa();else if(b.username)/likes/.test(a)?(console.log("DATA.USERNAME.LIKES"),ib=b.uri+"/likes"):/favorites/.test(a)?(console.log("DATA.USERNAME.FAVOURITES"),ib=b.uri+"/favorites"):
ib=b.uri+"/tracks",vc(ib);else if(f.isArray(b)){h=b.length;h>sa&&(h=sa);for(g=0;g<h;g++)b[g].streamable&&b[g].stream_url?z.push(dd(b[g])):(h+=1,h>b.length&&(h=b.length));h==$d?($b+=$d,$b<sa?vc(ib):(z.length>sa&&(z=z.slice(0,sa)),Wa())):(z.length>sa&&(z=z.slice(0,sa)),Wa())}else b.kind&&"group"==b.kind?(ib=b.uri+"/tracks",vc(ib)):(H.shift(),T())}).fail(function(b,h,g){u&&alert("Playlist process failed, soundcloud: "+a);H.shift();T()})}function dd(a){var b={type:"soundcloud"};a.duration&&(b.length=
a.duration);b.mp3=a.stream_url+(/\?/.test(a.stream_url)?"&":"?")+"consumer_key="+cd;b.ogg="";b.title=a.title;la&&(b.url=la);a.downloadable&&a.download_url?(P&&(b.dlink=P),U&&(b.download=U)):(P&&1!=P&&"true"!=P&&(b.dlink=P),U&&1!=U&&"true"!=U&&(b.download=U));a.artwork_url?b.thumb=a.artwork_url:ga&&(b.thumb=ga);return b}function Ve(a,b){return(/api\./.test(a)?a+"?":"https://api.soundcloud.com/resolve?url="+a+"&")+"format=json&offset="+$b+"&consumer_key="+b+"&callback=?"}function Dd(){var a=z[db].mp3+
"?rand="+99999999*Math.random();ID3.loadTags(a,function(){var b=ID3.getAllTags(a);b.title&&(z[db].title=b.title);b.artist&&(z[db].artist=b.artist);b.album&&(z[db].album=b.album);if(b=b.picture){var c="",h=0,g=b.data.length;for(h;h<g;h++)c+=String.fromCharCode(b.data[h]);z[db].thumb="data:"+b.format+";base64,"+window.btoa(c)}db++;db<z.length?Dd():Wa()},{tags:["title","artist","album","picture"],onError:function(a){}})}function Oe(){if(Z){var a=A.getCurrentTime(),b=A.getDuration();Ga=A.getVideoBytesLoaded()/
A.getVideoBytesTotal();r(a)&&r(b)?(lc=!1,Ha.html(Lb(a)+jb),Ia.html(Mb(b)),da)?ya&&(r(Ga)&&Oa(Ga),pa=a/b,!ha&&F&&(Ec||M(a/b))):(r(Ga)&&La.width(Ga*K),ha||xa.width(a/b*K)):lc=!0}}function We(){var a=n.currentTime,b=n.duration;void 0!=n.buffered&&0!=n.buffered.length&&r(b)&&(Ga=n.buffered.end(0)/b);r(a)&&r(b)&&(Ha&&Ha.html(Lb(a)+jb),Ia&&Ia.html(Mb(b)));if(da)ya&&(r(Ga)&&Oa(Ga),r(a)&&r(b)&&(pa=a/b,!ha&&F&&M(a/b)));else{if(r(Ga)){var c=Ga*K;c>K&&(c=K);La&&La.width(c)}r(a)&&r(b)&&!ha&&xa&&xa.width(a/b*
K)}}function Ac(){"undefined"!==typeof audioPlayerSoundEnd&&audioPlayerSoundEnd(O,N,t.getCounter());Qa();t.advanceHandler(1,!0)}function Bc(){Nc||("undefined"!==typeof audioPlayerSoundStart&&audioPlayerSoundStart(O,N,t.getCounter()),Nc=!0);"undefined"!==typeof audioPlayerSoundPlay&&audioPlayerSoundPlay(O,N,t.getCounter());da&&ya&&Jb()}function Cc(){"undefined"!==typeof audioPlayerSoundPause&&audioPlayerSoundPause(O,N,t.getCounter())}function Zc(){"youtube"==ca?Z?(Le(),isMobile&&!Pb&&fa&&(m=!1,pc("on"))):
("undefined"!==typeof l(E)&&(l(E).pb_play(ma,0,100,100,"youtube",fa),W=!0),tc=Ta=!0):X?(ae||(Xb=f(document.createElement("audio")).attr("preload",Xe),n=Xb[0],ae=!0),kb?n.src=ma:fc&&(n.src=xb),fa&&(n.load(),n.play()),Xb.on("ended",function(a){Ac()}).on("pause",function(a){Cc()}).on("play",function(a){Bc()}).on("canplay",function(a){}).on("canplaythrough",function(a){}).on("loadedmetadata",function(a){n.volume=C;Kb&&(n.seekable&&0<n.seekable.length&&(n.currentTime=Kb*n.duration),Kb=null);Ca&&clearInterval(Ca);
Ca=setInterval(We,250)}).on("error",function(a){switch(n.error.code){case n.error.MEDIA_ERR_ABORTED:console.log("You aborted the audio playback.");break;case n.error.MEDIA_ERR_NETWORK:console.log("A network error caused the audio download to fail part-way.");break;case n.error.MEDIA_ERR_DECODE:console.log("The audio playback was aborted due to a corruption problem or because the audio used features your browser did not support.");break;case n.error.MEDIA_ERR_SRC_NOT_SUPPORTED:console.log("The audio could not be loaded, either because the server or network failed or because the format is not supported.");
break;default:console.log("An unknown error occurred.")}})):"undefined"!==typeof l(v)&&l(v).pb_initAudio(ma);fa?(F=!0,fb("off")):(F=!1,Ka("off"));"youtube"!=ca&&(W=!0);!isMobile&&fa&&A&&A.setAutoPlay(!0);fa=!0}function zb(){var a=[k.find(".controls_next"),k.find(".controls_prev"),k.find(".controls_toggle"),k.find(".player_volume"),k.find(".player_download"),k.find(".player_loop"),k.find(".player_shuffle")],b,c=a.length,h=0;for(h;h<c;h++)if(b=f(a[h]).css("cursor","pointer").on("click",le),Ye&&!isMobile)b.on("mouseover",
me).on("mouseout",se);Je();tb?vd(tb):m||Hd()}function Nd(){if(!da&&(K=mc.width(),r(Ga)&&La&&La.width(Ga*K),!ha&&xa)){var a,b;if("youtube"!=ca){if(X)n&&(a=n.currentTime,b=n.duration);else if("undefined"!==typeof l(v))try{a=l(v).pb_getFlashPosition,b=l(v).pb_getFlashDuration()}catch(c){}try{a&&r(a)&&b&&r(b)&&xa.width(a/b*K)}catch(c){}}}Md&&!ra&&Jc();Bb&&ta&&ta.checkSize()}function Pc(){be.css("display","none")}function xd(){be.css("display","block")}function td(){Ca&&clearInterval(Ca);Bb&&ta&&ta.deactivate();
mb.html(gc);Ha.html(ed+jb);Ia.html(fd);da?ya&&(pa=0,L.clearRect(0,0,ka,oa),bb.clearRect(0,0,ka,oa)):(xa.width(0),La.width(0));Ka("off");uc.css("display","none")}function Mc(){Ca&&clearInterval(Ca);hb||(Bb&&ta&&ta.deactivate(),mb.html(gc));Ha.html(ed+jb);Ia.html(fd);da?ya&&(pa=0,L.clearRect(0,0,ka,oa),bb.clearRect(0,0,ka,oa)):(xa.width(0),La.width(0));Ka("off");uc.css("display","none")}function Ka(a){"on"==a?k.find(".controls_toggle").find("img").attr("src",Ze):k.find(".controls_toggle").find("img").attr("src",
$e);Ea&&Ea.hasClass("play_link")&&Ea.attr("src",zc);da&&(ya?(L.clearRect(0,0,ka,oa),M(pa),Jb()):"undefined"!==typeof l(ba)&&l(ba).pb_toggle_icon("play"))}function fb(a){"on"==a?k.find(".controls_toggle").find("img").attr("src",af):k.find(".controls_toggle").find("img").attr("src",bf);Ea&&Ea.hasClass("play_link")&&Sd.hasClass("hap_text_link")&&Ea.attr("src",Td);da&&(ya?(L.clearRect(0,0,ka,oa),M(pa),Jb()):"undefined"!==typeof l(ba)&&l(ba).pb_toggle_icon("pause"))}function r(a){return!isNaN(parseFloat(a))&&
isFinite(a)}function Lb(a){a=Math.round(a);minutes=Math.floor(a/60);minutes=10<=minutes?minutes:"0"+minutes;a=Math.floor(a%60);return minutes+":"+(10<=a?a:"0"+a)}function Mb(a){a=Math.round(a);minutes=Math.floor(a/60);minutes=10<=minutes?minutes:"0"+minutes;a=Math.floor(a%60);return minutes+":"+(10<=a?a:"0"+a)}function Za(a){if("string"===typeof a){if(Vc&&t&&-1!=t.getCounter()){var b=t.getCounter();a=Wc(B[b].id)+Xc+a}}else{if("number"===typeof a){if(!t||0>a||a>G-1)return!1}else if(!t)return!1;b=t.getCounter();
a=Kc(b)}Bb&&ta?(ta.input(a),ta.activate()):mb&&mb.html(a)}function Kc(a,b){if("undefined"===typeof b||null===b)b=!0;return B[a]&&B[a].title&&!I(B[a].title)?b?Vc?Wc(B[a].id)+Xc+B[a].title:B[a].title:B[a].title:gc}function Wc(a){return 9>a?"0"+(a+1):a+1}function cf(a){var b=[],c=[],h=0;for(h;h<a;h++)b[h]=h;var h=0,g;for(h;h<a;h++)g=Math.round(Math.random()*(b.length-1)),c[h]=b[g],b.splice(g,1);return c}function df(a){var b=[],c=0;for(c;c<a;c++)b[c]=c;return b}function Ce(a,b,c){"title"==b?a.sort(function(a,
b){return a.title==b.title?0:a.title<b.title?-1:1}):"type"==b&&a.sort(function(a,b){return a.type==b.type?0:a.type<b.type?-1:1});c&&a.reverse()}function I(a){return a?0==a.replace(/^\s+|\s+$/g,"").length:!0}function Be(a){a=a.split(":");for(var b=0,c=1;0<a.length;)b+=c*parseInt(a.pop()),c*=60;return b}function Ae(a){if(window.ActiveXObject&&window.GetObject){var b=new ActiveXObject("Microsoft.XMLDOM");b.loadXML(a);return b}if(window.DOMParser)return(new DOMParser).parseFromString(a,"text/xml");throw Error("No XML parser available");
}function ef(a,b){return b-a}function we(a){if("string"===typeof a)switch(a.toLowerCase()){case "true":case "yes":case "1":return!0;case "false":case "no":case "0":case null:return!1;default:return Boolean(a)}else if("boolean"===typeof a)return Boolean(a)}function ff(){var a=document.createElement("canvas");return!(!a.getContext||!a.getContext("2d"))}function Ed(a){var b,c="",h,g="",d="",e="",k,l,n,m;b=a.type.toLowerCase();a.origtype&&(c=a.origtype.toLowerCase());a.mp3?h=a.mp3:a.path&&(h=a.path);
a.ogg&&(g=a.ogg);a.title&&(d=a.title);a.thumb&&(e=a.thumb);a.download&&("youtube_single"==b||"youtube_single_list"==b||"youtube_playlist"==b?1==a.download||"true"==a.download||I(a.download)||(k=a.download):k=1==a.download?h:a.download);a.url&&(n=a.url);a.dlink&&("youtube_single"==b||"youtube_single_list"==b||"youtube_playlist"==b?1==a.dlink||"true"==a.dlink||I(a.dlink)||(l=a.dlink):l=1==a.dlink?h:a.dlink);"local"==b?"title"==Ya?m="<li class= 'playlistItem' data-type='local' data-origtype='"+c+"' data-mp3='"+
h+"' data-ogg='"+g+"' data-thumb='"+e+"' data-title='"+d+"'><a class='playlistNonSelected' href='#'>"+d+"</a></li>":"thumb"==Ya?m="<li class= 'playlistItem' data-type='local' data-origtype='"+c+"' data-mp3='"+h+"' data-ogg='"+g+"' data-thumb='"+e+"' data-title='"+d+"'><a class='playlistNonSelected' href='#'><img src='"+e+"' alt='thumb'/></a></li>":"all"==Ya&&(m="<li class= 'playlistItem' data-type='local' data-origtype='"+c+"' data-mp3='"+h+"' data-ogg='"+g+"' data-thumb='"+e+"' data-title='"+d+"'><a class='playlistNonSelected' href='#'><span class='hap_thumb'><img src='"+
e+"' alt='thumb'/></span><span class='hap_title'><p>'"+d+"'</p></span></a></li>"):(m="<li class= 'playlistItem' data-type='"+b+"' data-path='"+h+"' data-thumb='"+e+"'></li>","database_data"==b&&(h=a.table?a.table:null,c=a.limit?a.limit:null,a=a.range?a.range:null,h&&(h=' data-table="'+h+'" ',g=m.match(/\>/),m=m.slice(0,g.index)+h+m.slice(g.index)),c&&(h=' data-limit="'+c+'" ',g=m.match(/\>/),m=m.slice(0,g.index)+h+m.slice(g.index)),a&&(h=' data-range="'+a+'" ',g=m.match(/\>/),m=m.slice(0,g.index)+
h+m.slice(g.index))));k&&(h=' data-download="'+k+'" ',g=m.match(/\>/),m=m.slice(0,g.index)+h+m.slice(g.index));"local"==b?(l&&(h="<a class='dlink' href='#' data-dlink='"+l+"'><img src='"+Jd+"' alt='download'/></a>",g=m.match(/\<\/a\>\<\/li\>/),m=m.slice(0,g.index)+h+m.slice(g.index)),n&&(h="<a class='plink' href='"+n+"' target='_blank'><img src='"+Id+"' alt='purchase'/></a>",g=m.match(/\<\/a\>\<\/li\>/),m=m.slice(0,g.index)+h+m.slice(g.index))):(l&&(h=' data-dlink="'+l+'" ',g=m.match(/\>/),m=m.slice(0,
g.index)+h+m.slice(g.index)),n&&(h=' data-plink="'+n+'" ',g=m.match(/\>/),m=m.slice(0,g.index)+h+m.slice(g.index)));b=document.createElement("ul");b.innerHTML=m;return f(b.firstChild)}function Sc(a){a=f(a);var b;a=f("<div>").append(a.clone()).html();b=document.createElement("ul");b.innerHTML=a;return f(b.firstChild)}function Cb(a){G=B.length;if(0<G){xc();var b=t.getCounter();a==b?(sd(),t.setPlaylistItems(G)):(t.setPlaylistItems(G,!1),a<b&&t.reSetCounter(t.getCounter()-1));hb&&Za()}else Ub(),tb=null,
"undefined"!==typeof playlistEmpty&&playlistEmpty(O,N)}var m=!1,O=this;f("body");var Ld=f(window),Ra=f(document),Ne=f.inArray(window.location.protocol,["http:","https:"])?"http:":window.location.protocol,gd,Db=navigator.userAgent,yb;if(-1<Db.indexOf("iPhone")||-1<Db.indexOf("iPod")||-1<Db.indexOf("iPad"))-1<Db.indexOf("iPhone")?yb="iPhone":-1<Db.indexOf("iPod")?yb="iPod":-1<Db.indexOf("iPad")&&(yb="iPad");var ie=-1<navigator.userAgent.toLowerCase().indexOf("safari/"),hc=document.createElement("audio"),
kb,fc,Z=!1;hc.canPlayType?(Z=!0,kb=!!hc.canPlayType&&""!=hc.canPlayType("audio/mpeg"),fc=!!hc.canPlayType&&""!=hc.canPlayType('audio/ogg; codecs="vorbis"')):(kb=!0,fc=!1);var te=hap_source_path+e.buttonsUrl.prev,ne=hap_source_path+e.buttonsUrl.prevOn,ue=hap_source_path+e.buttonsUrl.next,oe=hap_source_path+e.buttonsUrl.nextOn,$e=hap_source_path+e.buttonsUrl.play,Ze=hap_source_path+e.buttonsUrl.playOn,bf=hap_source_path+e.buttonsUrl.pause,af=hap_source_path+e.buttonsUrl.pauseOn,qc=hap_source_path+e.buttonsUrl.loop,
Rb=hap_source_path+e.buttonsUrl.loopOn,id=hap_source_path+e.buttonsUrl.volume,pe=hap_source_path+e.buttonsUrl.volumeOn,jd=hap_source_path+e.buttonsUrl.mute,qe=hap_source_path+e.buttonsUrl.muteOn,rc=hap_source_path+e.buttonsUrl.shuffle,Sb=hap_source_path+e.buttonsUrl.shuffleOn,ve=hap_source_path+e.buttonsUrl.download,re=hap_source_path+e.buttonsUrl.downloadOn,Id=hap_source_path+e.buttonsUrl.trackUrlIcon,Jd=hap_source_path+e.buttonsUrl.trackDownloadIcon,De=hap_source_path+e.buttonsUrl.trackRemoveIcon,
Td=hap_source_path+e.buttonsUrl.link_pause,zc=hap_source_path+e.buttonsUrl.link_play,k=f(this).css("display","block"),da=k.hasClass("hap_circle"),ya=!1;Z&&ff()&&(ya=!0);var yd="html5audio-popup"==k.attr("id"),qb=k.find(".playlistHolder"),Pa=k.find(".playlist_inner").css("opacity",0);k.find(".playerHolder");k.find(".player_mediaTime");var Ha=k.find(".player_mediaTime_current"),Ia=k.find(".player_mediaTime_total"),fe=k.find(".player_mediaName_Mask"),mb=k.find(".player_mediaName");k.find(".player_controls");
var gf=k.find(".player_volume"),be=k.find(".preloader"),uc=k.find(".player_download");k.find(".componentPlaylist");var cb=f(e.playlistList);yd&&window.opener&&(cb=window.opener.jQuery(e.playlistList));var Fd=new APHAPYTLoader(e);f(Fd).on("APHAPYTLoader.END_LOAD",function(a,b){var c,h=b.length,d;for(c=0;c<h;c++)d=b[c],d.description=d.description?d.description.replace(/["']/g,""):null,la&&(d.url=la),P&&(d.dlink=P),U&&(d.download=U),z.push(d);z.length>ce&&(z=z.slice(0,ce));Wa()});var N=e.sound_id,fa=
e.autoPlay,Me=e.autoPlay,Xd=e.autoPlay,Xe=e.autoLoad;isMobile&&(fa=!1,Xd=e.autoPlay=!1);var hf=e.useOnlyMp3Format,cd=e.soundcloudApiKey,sa=e.soundcloud_result_limit,ze=e.podcast_result_limit,ce=e.yt_playlist_result_limit,dc=e.ofm_result_limit,Bb=e.useSongNameScroll,hb=e.autoSetSongTitle,Aa=e.loopingOn,Ba=e.randomPlay,jb=e.mediaTimeSeparator,md=e.seekTooltipSeparator,gc=e.defaultArtistData,Vc=e.useNumbersInPlaylist,Xc=e.titleSeparator,tb=e.activePlaylist,u=e.useAlertMessaging,Md=e.activatePlaylistScroll,
Ob=e.playlistScrollOrientation.toLowerCase(),Fe=e.sortablePlaylistItems,Ge=e.autoReuseMailForDownload,Kd=e.useRemoveBtnInTracks,jf=e.useVolumeTooltip,kf=e.useSeekbarTooltip,Ya=e.playlistItemContent.toLowerCase(),lf=e.useKeyboardNavigation,Ye=e.useBtnRollovers,ud=e.usePlaylistRollovers,Cd=e.getTrackInfoFromID3;Ha.html("0:00");Ia.html("0:00");var ed=Ha.html(),fd=Ia.html();mb.html(gc);Ha.html(ed+jb);Ia.html(fd);var X=!0;if(!Z||!kb&&hf)X=!1;var db,gb,Da,Wb,sb,rb,ra=!1,zd="hap_processed",Ad="hap_draggable",
Rc,la,Od,Yc,Ua,P,U,sc,ga,Zb,Sd,Ea,Yb,Oc,Uc=!1;void 0!=qb.attr("data-playlistLocked")&&(Uc=!0);var Qb="playlist_locked",Vb=!1,bc,q,w=null,x=!0,lc=!1,Nc=!1,ib,$b,$d=50,ca,W=!1,ma="",xb="",F=!1,Ud=hap_source_path+"includes/ba-simple-proxy.php",Ca,Ga;Aa&&k.find(".player_loop").find("img").attr("src",Rb);Ba&&k.find(".player_shuffle").find("img").attr("src",Sb);var B=[],Va=[],S=[],G=0,aa,wd,Bd=f('<div class="hap_feedParser"/>'),He=0==k.find("iframe[id='dl_iframe']").length?f('<iframe id="dl_iframe"/>').css({position:"absolute",
left:"-10000px",display:"none"}).appendTo(k):k.find("iframe[id='dl_iframe']"),ub=f("<div/>"),Qc=f("<div/>");if(isMobile)var cc,Ie=1E3,yc=0==qb.find("div[id='download_confirm']").length?f('<div id="download_confirm"><p>DOWNLOAD STARTING</p></DIV>').css({opacity:0,zIndex:1E3}).appendTo(qb):qb.find("div[id='download_confirm']");var z=[],H=[],v=e.flashAudio,ba=e.circleMain,ae=!1,Xb,n,A,Wd=!1,ec,E=e.flashYoutube,Fa,tc=!1,Ta=!1,Pb=!1,bd,ad=!1,Xa=[],Tc,wc,vb,$c,ta;Bb&&d();var t=f.playlistManager({randomPlay:Ba,
loopingOn:Aa});f(t).on("ap_PlaylistManager.COUNTER_READY",function(){var a=t.getCounter(),b=B[a];b&&!Uc&&(rd(),hb&&Za(),ca=b.origtype?b.origtype:b.type,ma=b.mp3,xb=b.ogg,b.download?sc=!0:sc=null,Tb(),Zc(),"undefined"!==typeof itemTriggered&&itemTriggered(O,N,a))});f(t).on("ap_PlaylistManager.PLAYLIST_END",function(){rd();"undefined"!==typeof audioPlayerPlaylistEnd&&audioPlayerPlaylistEnd(O,N);F=!1;Ka("off")});f(t).on("ap_PlaylistManager.PLAYLIST_END_ALERT",function(){"undefined"!==typeof audioPlayerPlaylistEnd&&
audioPlayerPlaylistEnd(O,N)});var wb="",nb="",ob="",Ja;"ontouchstart"in window?(Ja=!0,wb="touchstart.ap",nb="touchmove.ap",ob="touchend.ap"):(Ja=!1,wb="mousedown.ap",nb="mousemove.ap",ob="mouseup.ap");var Hb=!1,Dc,ic=!1,C=e.defaultVolume;0>C&&(C=0);0==C?Dc=.5:1<C&&(C=1);var ia=k.find(".volume_seekbar").css("cursor","pointer").on(wb,function(a){ua(a);return ic=!1}),Gb="horizontal";void 0!=ia.attr("data-orientation")&&(Gb=ia.attr("data-orientation").toLowerCase());if(void 0!=ia.attr("data-autoHide")){var Hb=
!0,Eb=!1,V,kc=parseInt(ia.attr("data-autoHide"),10);if(!isMobile)gf.on("mouseover",function(){if(!m)return!1;V&&clearTimeout(V);ia.css("display","block");Eb=!0;return!1}).on("mouseout",function(){if(!m)return!1;V&&clearTimeout(V);V=setTimeout(Y,kc);return!1})}var Fb=!1,ja=0,jc=k.find(".volume_level"),pb=k.find(".volume_bg");if(jf&&!isMobile){ia.on("mouseover",p);var Ma=k.find(".player_volume_tooltip"),ge=parseInt(Ma.css("top"),10);Ma.on("mouseenter",function(){ia.off("mouseover",p);Ma.css("display",
"none")}).on("mouseleave",function(){ia.on("mouseover",p)})}else k.find(".player_volume_tooltip").remove();var eb,Kb,ha=!1,mc=k.find(".progress_bg"),La=k.find(".load_progress"),xa=k.find(".play_progress"),$a=k.find(".player_progress"),K=mc.width(),Ec=!1;if(da){var lb=k.find(".load_canvas").css("cursor","pointer"),hd=k.find(".play_canvas"),Na=k.find(".circlePlayer"),de=parseFloat(Na.attr("data-offOpacity"),10),ee=parseFloat(Na.attr("data-onOpacity"),10);isMobile&&(de=ee=1);var Ab={flash_id:e.flash_id,
strokeSize:parseInt(Na.attr("data-strokeSize"),10),play_color:hd.attr("data-bgcolor"),load_color:lb.attr("data-bgcolor"),tolerance:parseInt(Na.attr("data-tolerance"),10),offOpacity:de,onOpacity:ee,circleWidth:lb.width(),circleHeight:lb.height()};if(ya){var Nb=Ab.strokeSize,Ic=Ab.play_color,je=Ab.load_color,L=lb[0].getContext("2d"),bb=hd[0].getContext("2d"),nd=2*Math.PI,oc=Math.PI/2,ka=Ab.circleWidth,oa=Ab.circleHeight,Hc=ka/2,ld=Hc-Nb,he=e.tolerance,kd,Gc=!1,pa=0;lb.on(wb,function(a){Gc=Fc(a)?!1:
!0;na(a);return!1});$a=lb}else lb.remove(),hd.remove()}else $a=k.find(".player_progress").css("cursor","pointer").on(wb,function(a){na(a);return!1});if(kf&&!isMobile){$a.on("mouseover",qa);var za=k.find(".player_progress_tooltip").css("zIndex",50);za.find("p").html("0:00"+md+"0:00");za.on("mouseenter",function(){$a.off("mouseover",qa);za.css("display","none")}).on("mouseleave",function(){$a.on("mouseover",qa)})}else k.find(".player_progress_tooltip").remove();this.flashVideoPause=function(){Ka("off");
F=!1;Cc()};this.flashVideoResume=function(){fb("off");F=!0;Bc()};this.flashVideoEnd=function(){Ac()};this.flashVideoStart=function(){fb("off");W=F=!0;Bc()};this.flashYoutubeData=function(a,b,c,d){da?(r(a)&&r(b)&&"undefined"!==typeof l(ba)&&l(ba).pb_drawLoadbar(a/b),r(c)&&r(d)&&(pa=c/d,ha||"undefined"!==typeof l(ba)&&l(ba).pb_drawSeekbar(c/d))):(r(a)&&r(b)&&La&&La.width(a/b*K),r(c)&&r(d)&&xa&&xa.width(c/d*K));r(c)&&r(d)&&(Ha&&Ha.html(Lb(c)+jb),Ia&&Ia.html(Mb(d)))};this.flashAudioData=function(a,b,
c,d){a/=b;da?ya?(r(a)&&Oa(a),r(c)&&r(d)&&(pa=c/d,!ha&&F&&M(c/d))):(null!==a&&"undefined"!==typeof l(ba)&&l(ba).pb_drawLoadbar(a),r(c)&&r(d)&&(pa=c/d,ha||"undefined"!==typeof l(ba)&&l(ba).pb_drawSeekbar(c/d))):(!ha&&xa&&xa.width(c/d*K),null!==a&&(a*=K,a>K&&(a=K),La&&La.width(a)),r(c)&&r(d)&&(Ha&&Ha.html(Lb(c)+jb),Ia&&Ia.html(Mb(d))))};this.flashAudioEnd=function(){Ac()};this.flashCircleToggle=function(a){Ib()};this.flashCircleOverLoader=function(a){za.css("display","block");nc(a)};this.flashCircleOutLoader=
function(){za.css("display","none")};this.flashCircleSeek=function(a){ea(a)};this.embedFlash=function(){if(Z)e.useOnlyMp3Format&&!kb&&(a=v.substr(1),embedFlashAudio(a));else{var a=E.substr(1);embedFlashMain(a);a=v.substr(1);embedFlashAudio(a);da&&(a=ba.substr(1),embedFlashCircle(a))}};lf&&Ra.keyup(function(a){if(!m||x)return!1;a||(a=window.event);a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();a=a.keyCode;220==a?O.previousAudio():219==a?O.nextAudio():221==a?O.toggleAudio():222==
a&&(y(),D());return!1});Ld.resize(function(){if(!m||x)return!1;gd&&clearTimeout(gd);gd=setTimeout(Nd,50)});this.setPlayIcon=function(){Ea&&Ea.hasClass("play_link")&&Ea.attr("src",zc);F=!1};this.playAudio=function(){if(!m||x||!w||F||!W)return!1;if("youtube"==ca){if(!Ta)return!1;Z?A.togglePlayback():"undefined"!==typeof l(E)&&l(E).pb_togglePlayback()}else X?n&&n.play():"undefined"!==typeof l(v)&&l(v).pb_play();fb("off");W=F=!0};this.pauseAudio=function(){if(!m||x||!w||!F||!W)return!1;if("youtube"==
ca){if(!Ta)return!1;Z?A.togglePlayback():"undefined"!==typeof l(E)&&l(E).pb_togglePlayback()}else X?n&&n.pause():"undefined"!==typeof l(v)&&l(v).pb_pause();Ka("off");F=!1};this.toggleAudio=function(){if(!m||x||!w||!W)return!1;Ib()};this.stopAudio=function(){if(!m||x||!w||!W)return!1;if("youtube"==ca){if(!Ta)return!1;Z?A.stop():"undefined"!==typeof l(E)&&l(E).pb_dispose()}else X?n&&(n.src="",kb?n.src=ma:fc&&(n.src=xb)):"undefined"!==typeof l(v)&&l(v).pb_dispose();Mc();F=!1};this.checkAudio=function(a){if(!m||
x||!w)return!1;a=a.toLowerCase();if(F){if("pause"==a)if("youtube"==ca){if(!Ta)return!1;Z?A.togglePlayback():"undefined"!==typeof l(E)&&l(E).pb_togglePlayback()}else X?n&&n.pause():"undefined"!==typeof l(v)&&l(v).pb_pause();else if("stop"==a){if("youtube"==ca){if(!Ta)return!1;A.stop()}else X?n&&(n.src="",kb?n.src=ma:fc&&(n.src=xb)):"undefined"!==typeof l(v)&&l(v).pb_dispose();Mc()}F=!1;Ka("off")}};this.nextAudio=function(){if(!m||x||!w)return!1;Qa();t.advanceHandler(1,!0)};this.previousAudio=function(){if(!m||
x||!w)return!1;Qa();t.advanceHandler(-1,!0)};this.loadAudio=function(a){if(!m||x||!w)return!1;if("string"===typeof a){var b=0,c=!1;for(b;b<G;b++)if(a==B[b].title){a=b;c=!0;break}if(!c)return u&&alert('Track with name "'+a+'" doesnt exist. Load audio failed.'),!1}else if("number"===typeof a){if(0>a||a>G-1)return u&&alert('Invalid track number. Track number  "'+a+'" doesnt exist. Load audio failed.'),!1}else return u&&alert("Load audio method requires either a track number or a track title to load. Load audio failed."),
!1;Qa();t.processPlaylistRequest(a)};this.loadPlaylist=function(a){if(!m||x)return!1;if("undefined"===typeof a)return u&&alert("loadPlaylist method requires data parameter. loadPlaylist failed."),!1;tb=a;vd(tb)};this.addTrack=function(a,b,c,d){if(!m||x)return!1;if("undefined"===typeof a)return u&&alert("addTrack method requires type parameter. AddTrack failed."),!1;if("undefined"===typeof b)return u&&alert("addTrack method requires format parameter. AddTrack failed."),!1;if("undefined"===typeof c)return u&&
alert("addTrack method requires track parameter. AddTrack failed."),!1;var g=1,e=!1;if("string"!==typeof c&&"[object Object]"!==Object.prototype.toString.call(c))if("[object Array]"===Object.prototype.toString.call(c))g=c.length,e=!0;else return u&&alert("addTrack method requires track as string, object or array parameter. AddTrack failed."),!1;Da=d;a=a.toLowerCase();"visible"==a?(w&&ra&&Ub(),Wb=!0,ra=!1):(w&&!ra&&Ub(),ra=sb=!0);gb=!1;if(w)if("undefined"!==typeof Da){if(0>Da||Da>G)return u&&alert('Invalid position to insert track to. Position number "'+
d+'" doesnt exist. AddTrack failed.'),!1;Da==G&&(gb=!0)}else gb=!0,Da=G;else{if("undefined"!==typeof Da){if(0!=Da)return u&&alert('Invalid position to insert track to. Position number "'+d+'" doesnt exist. AddTrack failed.'),!1}else Da=0;gb=!0}xd();x=!0;Vb=!1;d=0;var k;k="playlist"+Math.floor(9999*Math.random());var l=f("<ul id = "+k+"></ul>");b=b.toLowerCase();for(d;d<g;d++)k=e?c[d]:c,"html"==b?Sc(k).appendTo(l):(k.type&&k.mp3||k.path)&&Ed(k).appendTo(l);H=[];ub.empty();l.appendTo(ub).find("li[class='playlistItem']").each(function(){H.push(f(this))});
rb=!1;w||(rb=!0,w="visible"==a?Pa:Qc);T()};this.inputAudio=function(a){if(!m||x)return!1;if("undefined"===typeof a)return u&&alert("inputAudio method requires data parameter. inputAudio failed."),!1;if("undefined"===a.mp3)return u&&alert("inputAudio method requires data.mp3 parameter. inputAudio failed."),!1;Qa();t.reSetCounter();ma=a.mp3;"undefined"!==a.ogg&&(xb=a.ogg);"undefined"!==a.title?Za(a.title):Za(gc);isMobile&&(fa=!0,X||"undefined"!==typeof l(v)&&l(v).pb_setAutoplay(!0));Tb();Zc()};this.removeTrack=
function(a){if(!m||x||!w)return!1;if("undefined"===typeof a)return u&&alert("removeTrack method requires track parameter. removeTrack failed."),!1;if("string"===typeof a){var b=0,c=!1;for(b;b<G;b++)if(a==B[b].title){a=b;c=!0;break}if(!c)return u&&alert('Track with name "'+a+'" doesnt exist. RemoveTrack failed.'),!1;S[a]&&B[a]?(S[a].remove(),B.splice(a,1),Cb(a)):u&&alert('RemoveTrack with name "'+a+'" failed.')}else if("number"===typeof a){if(0>a||a>G-1)return u&&alert('Invalid track number. Track number  "'+
a+'" doesnt exist. RemoveTrack failed.'),!1;S[a]&&B[a]?(S[a].remove(),B.splice(a,1),Cb(a)):u&&alert('RemoveTrack with name "'+a+'" failed.')}else if("[object Array]"===Object.prototype.toString.call(a))if("string"===typeof a[0]?b=!0:"number"===typeof a[0]&&(b=!1),b){var b=0,c=a.length,d,g,f;b;a:for(;b<c;b++)if(g=a[b],"string"===typeof g){f=0;d=B.length;if(0==d){Cb();break a}for(f;f<d;f++)if(g==B[f].title&&S[f]&&B[f]){S[f].remove();B.splice(f,1);Cb(f);break}}}else a:for(a.sort(ef),b=0,c=a.length,b;b<
c;b++){if(g=a[b],"number"===typeof g){d=B.length;if(0==d){Cb();break a}-1<g&&g<d&&S[g]&&B[g]&&(S[g].remove(),B.splice(g,1),Cb(g))}}else return u&&alert("removeTrack method requires track parameter as string, number or array. removeTrack failed."),!1};this.destroyAudio=function(){if(!m||x||!w)return!1;sd()};this.destroyPlaylist=function(){if(!m||x||!w)return!1;Ub()};this.setTitle=function(a){if(!m||x||!w)return!1;Za(a)};this.toggleShuffle=function(){if(!m||x)return!1;Ba?(k.find(".player_shuffle").find("img").attr("src",
rc),Ba=!1):(k.find(".player_shuffle").find("img").attr("src",Sb),Ba=!0);t.setRandom(Ba)};this.toggleLoop=function(){if(!m||x)return!1;Aa?(k.find(".player_loop").find("img").attr("src",qc),Aa=!1):(k.find(".player_loop").find("img").attr("src",Rb),Aa=!0);t.setLooping(Aa)};this.setVolume=function(a){if(!m||x)return!1;0>a?a=0:1<a&&(a=1);C=a;D()};this.getVolume=function(){return m?C:!1};this.setAutoPlay=function(a){if(!m)return!1;fa=a;X||"undefined"!==typeof l(v)&&l(v).pb_setAutoplay(a)};this.getAutoPlay=
function(){return m?fa:!1};this.getIsMobile=function(){return isMobile};this.getMobileType=function(){return yb};this.getSetupDone=function(){return m};this.getPlaylistLoaded=function(){return Vb};this.getPlaylistTransition=function(){return x};this.getMediaPlaying=function(){return!m||x?!1:F};this.getAudioInited=function(){return!m||x?!1:W};this.getMediaType=function(){return!m||x?!1:ca};this.getActiveItem=function(){return!m||x?!1:t.getCounter()};this.getPlaylistItems=function(a){if(!m||x||!S||
0==S.length)return!1;if("string"===typeof a)return S;if("number"===typeof a)return 0>num||num>G-1||!S[num]?!1:S[num]};this.getMediaCount=function(){return!m||x?!1:r(G)?G:0};this.getPlaylistHidden=function(){return!m||x?!1:ra};this.get_hidden_playlist_holder=function(){return m?Qc:!1};this.getPlaylistList=function(){return m&&cb&&0!=cb.length?cb:!1};this.orderPlaylist=function(a,b){if(!m||!w)return!1;if("undefined"===typeof a)return u&&alert("orderPlaylist method requires action parameter. orderPlaylist failed."),
!1;var c=w.children("li"),d=c.length;if(0==d)return!1;var g=a.toLowerCase();if("reverse"==g)w.append(c.get().reverse());else if("random"==g||"remap"==g||"swap"==g){if("random"==g)b=cf(d);else if("remap"==g){if("undefined"===typeof b||b.length!=d)return!1}else if("swap"==g){if("undefined"===typeof b||2!=b.length)return!1;c=df(d);c.splice(b[1],1,b[0]);c.splice(b[0],1,b[1]);b=f.extend(!0,[],c)}else return!1;orderedItems=jQuery.map(b,function(a){return jQuery(S).get(a)});w.empty().html(orderedItems)}else return u&&
alert("Wrong action parameter for orderPlaylist method. orderPlaylist failed."),!1;xc();if(c=Pa.find("a[class=playlistSelected]").attr("data-id"))t.reSetCounter(c),hb&&Za()};this.checkScroll=function(){if(!m||x||!w)return!1;Jc()};this.reinitScroll=function(){if(!m||x||!w)return!1;aa&&(aa.reinitialise(),"vertical"==Ob?(aa.scrollToY(0),f(".jspPane").css("top","0px")):(aa.scrollToX(0),f(".jspPane").css("left","0px")));Bb&&ta&&t&&-1!=t.getCounter()&&hb&&Za()};this.getPlaylistData=function(){return m&&
!x&&w?B:!1};this.getSoundId=function(){return m?N:!1};this.getTouch=function(){return m?Ja:!1};this.get_hap_source_path=function(){return m?hap_source_path:!1};Z?(f(".flashMain").remove(),f(".circleMain").remove(),X?(f(".flashAudio").remove(),zb()):Se()):Pe();return this}})(jQuery);
(function(f){f.APHAPYTLoader=function(e){function d(){if(p.length){D=p.shift();y=D.type;var d=D.path;R=[];qa=0;ea=1;Sa=D.limit?D.limit:200;ab=D.order?D.order:"relevance";if("youtube_single"==y||"youtube_single_list"==y)d="https://www.googleapis.com/youtube/v3/videos?id="+d+"&key="+M+"&part=snippet,contentDetails,statistics,status";else if(-1==$.inArray(ab,nc)&&(ab="relevance"),"youtube_playlist"==y)d="https://www.googleapis.com/youtube/v3/playlistItems?part=snippet,status,contentDetails&maxResults=50&playlistId="+
d+"&key="+M+"";else if("youtube_video_query"==y)d="https://www.googleapis.com/youtube/v3/search?part=id,snippet&type=video&maxResults=50&order="+ab+"&q="+(D.query||D.path)+"&key="+M+"";else if("youtube_user_channels"==y)d="https://www.googleapis.com/youtube/v3/channels?part=contentDetails&maxResults=50&forUsername="+d+"&key="+M+"";else if("youtube_channel"==y)d="https://www.googleapis.com/youtube/v3/channels?part=snippet,contentDetails&id="+d+"&key="+M+"";else{alert("Wrong youtube type V3!");return}Y(d)}else $(Q).trigger("APHAPYTLoader.END_LOAD",
[J])}function Y(f){$.ajax({url:f,dataType:"jsonp"}).done(function(f){f.error&&f.error.message&&alert(f.error.message);var e,p=f.items.length;p+qa>Sa&&(p=Sa-qa);for(e=0;e<p;e++)if(_item=f.items[e])"youtube_playlist"==y||"youtube_single"==y||"youtube_single_list"==y?("private"!=_item.status.privacyStatus&&J.push(ua(_item,y)),qa++):"youtube_video_query"==y?(J.push(ua(_item,y)),qa++):"youtube_user_channels"!=y&&"youtube_channel"!=y||R.push(_item.contentDetails.relatedPlaylists.uploads);if("youtube_single"==
y||"youtube_single_list"==y)d();else if("youtube_user_channels"!=y&&"youtube_channel"!=y)if(ea+=50,ea<Sa)if(ea<=f.pageInfo.totalResults&&f.nextPageToken){e=D.path;if("youtube_playlist"==y)var Oa="https://www.googleapis.com/youtube/v3/playlistItems?pageToken="+f.nextPageToken+"&part=snippet,status,contentDetails&maxResults=50&playlistId="+e+"&key="+M+"";else"youtube_video_query"==y&&(Oa="https://www.googleapis.com/youtube/v3/search?pageToken="+f.nextPageToken+"&part=id,snippet&maxResults=50&order="+
ab+"&q="+e+"&key="+M+"");Y(Oa)}else d();else va&&(na++,na<R.length?(ea=0,wa=R[na],Oa="https://www.googleapis.com/youtube/v3/playlistItems?part=snippet,status,contentDetails&maxResults=50&playlistId="+wa+"&key="+M+"",Y(Oa)):(va=!1,d())),d();else R.length?(1<R.length&&(va=!0),wa=R[na],Oa="https://www.googleapis.com/youtube/v3/playlistItems?part=snippet,status,contentDetails&maxResults=50&playlistId="+wa+"&key="+M+"",y="youtube_playlist",Y(Oa)):d()}).fail(function(f,e,p){alert("There was an error retrieveing youtube data: "+
f.responseText);d()})}function ua(d,f){var e=jQuery.extend(!0,{},D);e.deeplink&&"youtube_single"!=e.type&&(e.deeplink+=(qa+1).toString());e.data=d;e.type="youtube";e.origtype=f;"youtube_single"==f||"youtube_single_list"==f?e.id=d.id:"youtube_playlist"==f?e.id=d.contentDetails.videoId:"youtube_video_query"==f&&(e.id=d.id.videoId);e.title||(e.title=d.snippet.title?d.snippet.title:null);e.description||(e.description=d.snippet.description?d.snippet.description:null);!e.thumb&&d.snippet.thumbnails?d.snippet.thumbnails.medium?
e.thumb=d.snippet.thumbnails.medium.url:d.snippet.thumbnails.standard&&(e.thumb=d.snippet.thumbnails.standard.url):default_artwork&&(e.thumb=default_artwork);e.mp3=e.id;e.ogg="";return e}var Q=this,y,D,p=[],J=[],R=[],na=0,wa,va,ea,qa,Sa,ab,nc="date rating relevance title videoCount viewCount".split(" "),M=e.ytAppId;$.inArray(f.location.protocol,["http:","https:"]);this.setData=function(f){M&&""!=M?(J=[],p=$.extend(!0,[],[f]),d()):alert("Youtube APMBI key missing! Please set APMBI key in player settings.")}}})(window);
(function(f){function e(d,e){function ua(d){p.playerReady=!0;p.forcePreviewStop||(f(p).trigger("ap_YoutubePlayer.YT_READY"),"undefined"!==typeof p._player.setVolume&&p._player.setVolume(100*p._defaultVolume),p._autoPlay&&p._player.playVideo())}function Q(d){f(p).trigger("ap_YoutubePlayer.QUALITY_CHANGE",[d.data])}function y(d){if(p.forceMainStop&&(p.forceMainStop=!1,"undefined"!==typeof p._player.stopVideo)){p._player.stopVideo();f(p).trigger("ap_YoutubePlayer.FORCE_MAIN_STOP");return}-1!=d.data&&
(0==d.data?(f(p).trigger("ap_YoutubePlayer.END_PLAY"),p.loop&&p._player.playVideo()):1==d.data?(p.forcePreviewStop&&"undefined"!==typeof p._player.stopVideo&&p._player.stopVideo(),p._autoPlay=!0,p.small_embed&&"undefined"!==typeof p._player.setVolume&&p._player.setVolume(100*p._defaultVolume),p._inited||(f(p).trigger("ap_YoutubePlayer.START_PLAY"),p._inited=!0,!p.small_embed&&p.quality?p._player.setPlaybackQuality(p.quality):p.small_embed&&p._player.setPlaybackQuality(p._player.getAvailableQualityLevels()[p._player.getAvailableQualityLevels().length-
1])),f(p).trigger("ap_YoutubePlayer.STATE_PLAYING")):2==d.data?f(p).trigger("ap_YoutubePlayer.STATE_PAUSED"):5==d.data&&f(p).trigger("ap_YoutubePlayer.STATE_CUED"))}function D(d){f(p).trigger("ap_YoutubePlayer.ERROR_HANDLER",[d.data])}var p=this;this.isIE=d.isIE?d.isIE:!1;this.isMobile=d.isMobile;this.initialAutoplay=d.initialAutoplay;this._inited=!1;this._player;this._autoPlay=d.autoPlay;this._defaultVolume=d.defaultVolume;this._youtubeHolder=d.youtubeHolder;this._frameId="ytplayer"+Math.floor(16777215*
Math.random());d.quality&&(this.quality=d.quality);d.small_embed&&(this.small_embed=d.small_embed);d.loop&&(this.loop=d.loop);this.lastID;this.playerReadyInterval=100;this.playerReadyIntervalID;this.playerReady=!1;this.protocol=d.protocol;0==d.youtubeChromeless&&(e.useControls=!0,e.ytShowinfo=!0);var J="?controls="+(e.useControls?1:0).toString(),R="&amp;autohide="+(e.autoHideControls?1:0).toString(),na="&amp;showinfo="+(e.ytShowinfo?1:0).toString(),wa="&amp;modestbranding="+(e.ytModestbranding?1:
0).toString(),va="&amp;rel="+(e.ytRel?1:0).toString(),ea="&amp;theme="+(e.ytTheme?e.ytTheme:"dark");this.forcePreviewStop=this.forceMainStop=!1;this.youtubeVideoIframe=f("<iframe />",{frameborder:0,src:"https://www.youtube.com/embed/"+d.mediaPath+J+va+na+R+"&amp;enablejsapi=1"+ea+wa+"&amp;wmode=transparent",width:"100%",height:"100%",id:this._frameId,webkitAllowFullScreen:!0,mozallowfullscreen:!0,allowFullScreen:!0});this._youtubeHolder.css("display","block").append(this.youtubeVideoIframe);J=document.createElement("script");
J.src=this.protocol+"//www.youtube.com/iframe_api";R=document.getElementsByTagName("script")[0];R.parentNode.insertBefore(J,R);var qa=setInterval(function(){window.YT&&window.YT.Player&&(qa&&clearInterval(qa),p._player=new YT.Player(p._frameId,{events:{onReady:ua,onPlaybackQualityChange:Q,onStateChange:y,onError:D}}))},100);window.onYouTubeIframeAPIReady=function(){}}f.youtubePlayer=function(d,f){return new e(d,f)};e.prototype={clean:function(d){this._player&&("undefined"!==typeof this._player.stopVideo&&
this._player.stopVideo(),this._player=null);this.youtubeVideoIframe&&(this.youtubeVideoIframe.attr("src",""),this.youtubeVideoIframe.remove(),this.youtubeVideoIframe=null);this._youtubeHolder&&this._youtubeHolder.empty().css("display","none")},stopPreview:function(){this.forcePreviewStop=!0},initVideo:function(d,f){this.forcePreviewStop=this.forceMainStop=!1;this.quality=f;if(this.playerReady)this._player&&(this._inited=!1,this._autoPlay?"undefined"!==typeof this._player.loadVideoById&&this._player.loadVideoById(d):
"undefined"!==typeof this._player.cueVideoById&&this._player.cueVideoById(d));else{var e=this;this.lastID=d;this.playerReadyIntervalID||(this.playerReadyIntervalID=setInterval(function(){e.playerReady&&(e.playerReadyIntervalID&&clearInterval(e.playerReadyIntervalID),e.forceMainStop||e.initVideo(e.lastID))},this.playerReadyInterval))}},stop:function(){this.forceMainStop=!0;this._player&&"undefined"!==typeof this._player.stopVideo&&this._player.stopVideo()},play:function(){this._player&&"undefined"!==
typeof this._player.playVideo&&this._player.playVideo()},pause:function(){this._player&&"undefined"!==typeof this._player.pauseVideo&&this._player.pauseVideo()},togglePlayback:function(d){if(this._player)if(void 0==d){if("undefined"===typeof this._player.getPlayerState)return!1;d=this._player.getPlayerState();1==d?"undefined"!==typeof this._player.pauseVideo&&this._player.pauseVideo():2==d?"undefined"!==typeof this._player.playVideo&&this._player.playVideo():-1!=d&&5!=d&&0!=d||"undefined"===typeof this._player.playVideo||
this._player.playVideo()}else d?"undefined"!==typeof this._player.playVideo&&this._player.playVideo():"undefined"!==typeof this._player.pauseVideo&&this._player.pauseVideo()},seek:function(d){this._player&&"undefined"!==typeof this._player.seekTo&&this._player.seekTo(d)},isMuted:function(){if(this._player&&"undefined"!==typeof this._player.isMuted)return this._player.isMuted()},getDuration:function(){if(this._player&&"undefined"!==typeof this._player.getDuration)return this._player.getDuration()},
getCurrentTime:function(){if(this._player&&"undefined"!==typeof this._player.getCurrentTime)return this._player.getCurrentTime()},getVideoLoadedFraction:function(){if(this._player&&"undefined"!==typeof this._player.getVideoLoadedFraction)return this._player.getVideoLoadedFraction()},getVideoBytesLoaded:function(){if(this._player&&"undefined"!==typeof this._player.getVideoBytesLoaded)return this._player.getVideoBytesLoaded()},getVideoBytesTotal:function(){if(this._player&&"undefined"!==typeof this._player.getVideoBytesTotal)return this._player.getVideoBytesTotal()},
setVolume:function(d){0>d?vol=0:1<d&&(d=1);this._player&&"undefined"!==typeof this._player.setVolume&&this._player.setVolume(100*d)},getPlayerState:function(){if(this._player&&"undefined"!==typeof this._player.getPlayerState)return this._player.getPlayerState()},setAutoPlay:function(d){this._autoPlay=d},getQualityLevels:function(){return this._player.getAvailableQualityLevels()},getCurrQuality:function(){return this._player.getPlaybackQuality()},setPlaybackQuality:function(d){this._player.setPlaybackQuality(d)}}})(jQuery);
(function(f){function e(d){this._loopingOn=d.loopingOn;this._randomPlay=d.randomPlay;this._playlistItems;this._lastInOrder=!1;this._counter=-1;this._lastPlayedFromPlaylistClick;this._lastRandomCounter;this._randomPaused=!1;this._randomArr=[];this._playlistSelect=!1}f.playlistManager=function(d){return new e(d)};e.prototype={setCounter:function(d,e){"undefined"===typeof e&&(e=!0);this._counter=e?this._counter+parseInt(d,10):parseInt(d,10);this._checkCounter()},getCounter:function(){return this._randomPlay?
this._playlistSelect?this._counter:this._randomArr[this._counter]:this._counter},advanceHandler:function(d){this._playlistSelect=!1;this._randomPaused?this._handleRandomPaused(d):this.setCounter(d)},processPlaylistRequest:function(d){this._playlistSelect=!1;this._randomPlay&&(this._playlistSelect=!0,this._lastPlayedFromPlaylistClick=d,this._randomPaused||(this._lastRandomCounter=this._counter,this._randomPaused=!0));this.setCounter(d,!1)},getLastInOrder:function(){return this._lastInOrder},getRandomPaused:function(){return this._randomPaused},
setPlaylistItems:function(d,e){"undefined"===typeof e&&(e=!0);e&&(this._counter=-1);this._playlistItems=d;this._randomPlay&&this._makeRandomList()},reSetCounter:function(d){"undefined"===typeof d?this._counter=-1:(d=parseInt(d,10),this._playlistItems?(d>this._playlistItems-1?d=this._playlistItems-1:0>d&&(d=0),this._counter=d):this._counter=-1)},setRandom:function(d){(this._randomPlay=d)&&this._makeRandomList();this._randomChange()},setLooping:function(d){this._loopingOn=d},_handleRandomPaused:function(d){var e=
f(this);this._randomPaused=!1;this._lastRandomCounter+d>this._playlistItems-1?(this._counter=this._playlistItems-1,e.trigger("ap_PlaylistManager.COUNTER_READY")):0>this._lastRandomCounter+d?(this._counter=0,e.trigger("ap_PlaylistManager.COUNTER_READY")):this.setCounter(this._lastRandomCounter+d,!1)},_randomChange:function(){this._randomPlay?(this._activeIndexFirst(),this._counter=0):this._randomPaused?(this._counter=this._lastPlayedFromPlaylistClick,this._randomPaused=!1):this._counter=this._randomArr[this._counter]},
_checkCounter:function(){if(isNaN(this._counter))alert("ap_PlaylistManager message: No active media, counter = "+this._counter);else{var d=f(this);this._lastInOrder=!1;this._loopingOn?(this._randomPlay?this._counter>this._playlistItems-1?(this._counter=this._randomArr[this._playlistItems-1],this._makeRandomList(),this._firstIndexCheck(),this._counter=0,d.trigger("ap_PlaylistManager.PLAYLIST_END")):0>this._counter&&(this._counter=this._randomArr[0],this._makeRandomList(),this._lastIndexCheck(),this._counter=
this._playlistItems-1):this._counter>this._playlistItems-1?(this._counter=0,d.trigger("ap_PlaylistManager.PLAYLIST_END")):0>this._counter&&(this._counter=this._playlistItems-1),d.trigger("ap_PlaylistManager.COUNTER_READY")):(this._counter>this._playlistItems-1?(this._counter=this._playlistItems-1,this._lastInOrder=!0):0>this._counter&&(this._counter=0),this._lastInOrder?d.trigger("ap_PlaylistManager.PLAYLIST_END"):d.trigger("ap_PlaylistManager.COUNTER_READY"))}},_makeRandomList:function(){3>this._playlistItems||
(this._randomArr=this._randomiseIndex(this._playlistItems))},_firstIndexCheck:function(){if(this._randomArr[0]==this._counter){var d=this._randomArr.splice(0,1);this._randomArr.push(d)}},_lastIndexCheck:function(){if(this._randomArr[this._playlistItems-1]==this._counter){var d=this._randomArr.splice(this._playlistItems-1,1);this._randomArr.unshift(d)}},_activeIndexFirst:function(){var d,e=this._randomArr.length;for(d=0;d<e;d++)if(this._randomArr[d]==this._counter){if(0==d)break;d=this._randomArr.splice(d,
1);this._randomArr.unshift(parseInt(d,10));break}},_randomiseIndex:function(d){var e=[],f=[],Q;for(Q=0;Q<d;Q++)e[Q]=Q;var y;for(Q=0;Q<d;Q++)y=Math.round(Math.random()*(e.length-1)),f[Q]=e[y],e.splice(y,1);return f}}})(jQuery);
(function(f){apTextScroller=function(){function e(){"left"==D&&(J-=f,d.css("left",J+"px"),parseInt(d.css("left"),10)<-y&&(J=-f))}var d,f,ua,Q,y,D,p,J=0,R,na,wa,va,ea=!1;this.init=function(e,p,y,J,M,ea){R=e;d=p;ua=y;D=J;Q=M;f=ea};this.input=function(e){na=e;R.html(e);wa=R.width();var f=e.replace(/\s/g,"&nbsp;")+Q;d.html("");d.css("width","auto");d.html(f);y=d.width();if(0!=y){e=f;if(y<=2*ua.width()){for(var p=Math.floor(2*ua.width()/y),D=0;D<p;D++)e+=f;f=y*(p+1)}else e+=f,f=2*y;d.html(e);d.css("width",
f+1+"px");va=e;ea=!0}};this.inputSingle=function(d){};this.activate=function(){this.deactivate();ua.width()>=wa?d.html(na):(d.html(va),p=setInterval(e,100))};this.deactivate=function(){p&&clearInterval(p);"left"==D&&(d.css("left","0px"),J=0)};this.checkSize=function(){ea&&(ua.width()>=wa?(this.deactivate(),d.html(na)):(d.html(va),this.activate()))}}})(jQuery);
